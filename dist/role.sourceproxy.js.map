{"version":3,"sources":["role.sourceproxy.ts"],"names":["output","require","routerHelper","roleSourceProxy","run","creep","carry","energy","carryCapacity","container","pos","findClosestByRange","FIND_STRUCTURES","filter","structure","structureType","store","RESOURCE_ENERGY","storeCapacity","transfer","ERR_NOT_IN_RANGE","routeCreep","visualizePathStyle","stroke","target","STRUCTURE_EXTENSION","STRUCTURE_SPAWN","energyCapacity","harvest","memory","source","module","exports"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,UAAR,CAAb;AACA,IAAIC,eAAeD,QAAQ,UAAR,CAAnB;AACA,IAAIE,kBAAkB;AAClBC,SAAK,aAACC,KAAD,EAAY;AACb,YAAGA,MAAMC,KAAN,CAAYC,MAAZ,KAAuBF,MAAMG,aAA7B,IAA8CH,MAAMC,KAAN,CAAYC,MAAZ,IAAsB,EAAvE,EAA2E;AACvE,gBAAIE,YAAYJ,MAAMK,GAAN,CAAUC,kBAAV,CAA6BC,eAA7B,EAA8C;AAC1DC,wBAAQ,gBAASC,SAAT,EAAsC;AAC1C,2BAAOA,UAAUC,aAAV,KAA4B,WAA5B,IAA2CD,UAAUE,KAAV,CAAgBC,eAAhB,IAAmCH,UAAUI,aAA/F;AACH;AAHyD,aAA9C,CAAhB;AAKA,gBAAGT,cAAc,IAAjB,EAAsB;AAClB,oBAAGJ,MAAMc,QAAN,CAAeV,SAAf,EAA0BQ,eAA1B,MAA+CG,gBAAlD,EAAoE;AAChElB,iCAAamB,UAAb,CAAwBhB,KAAxB,EAA+BI,SAA/B,EAA0C,EAACa,oBAAoB,EAACC,QAAQ,SAAT,EAArB,EAA1C;AACH;AACJ,aAJD,MAIK;AACD,oBAAIC,SAASnB,MAAMK,GAAN,CAAUC,kBAAV,CAA6BC,eAA7B,EAA8C;AACvDC,4BAAQ,gBAACC,SAAD,EAAoC;AACxC,+BAAO,CAACA,UAAUC,aAAV,KAA4BU,mBAA5B,IACJX,UAAUC,aAAV,KAA4BW,eADzB,KAEFZ,UAAUP,MAAV,GAAmBO,UAAUa,cAFlC;AAGH;AALsD,iBAA9C,CAAb;AAOA,oBAAGH,WAAS,IAAZ,EAAiB;AACb,wBAAGnB,MAAMc,QAAN,CAAeK,MAAf,EAAuBP,eAAvB,MAA4CG,gBAA/C,EAAiE;AAC7DlB,qCAAamB,UAAb,CAAwBhB,KAAxB,EAA+BmB,MAA/B,EAAuC,EAACF,oBAAoB,EAACC,QAAQ,SAAT,EAArB,EAAvC;AACH;AACJ;AACJ;AACJ,SAxBD,MAwBO;AACH,gBAAGlB,MAAMuB,OAAN,CAAcvB,MAAMwB,MAAN,CAAaC,MAA3B,MAAuCV,gBAA1C,EAA4D;AACxDlB,6BAAamB,UAAb,CAAwBhB,KAAxB,EAA+BA,MAAMwB,MAAN,CAAaC,MAA5C,EAAoD,EAACR,oBAAoB,EAACC,QAAQ,SAAT,EAArB,EAApD;AACH;AACJ;AACJ;AA/BiB,CAAtB;AAkCAQ,OAAOC,OAAP,GAAiB7B,eAAjB","file":"role.sourceproxy.js","sourcesContent":["let output = require('./output')\r\nlet routerHelper = require('./router')\r\nlet roleSourceProxy = {\r\n    run: (creep:Creep) =>{\r\n        if(creep.carry.energy === creep.carryCapacity && creep.carry.energy >= 50) {\r\n            let container = creep.pos.findClosestByRange(FIND_STRUCTURES, {\r\n                filter: function(structure:Container|Structure) {\r\n                    return structure.structureType === \"container\" && structure.store[RESOURCE_ENERGY] < structure.storeCapacity\r\n                }\r\n            });\r\n            if(container !== null){\r\n                if(creep.transfer(container, RESOURCE_ENERGY) === ERR_NOT_IN_RANGE) {\r\n                    routerHelper.routeCreep(creep, container, {visualizePathStyle: {stroke: '#ffffff'}})\r\n                }\r\n            }else{\r\n                let target = creep.pos.findClosestByRange(FIND_STRUCTURES, {\r\n                    filter: (structure:Extension|Spawn|Structure) => {\r\n                        return (structure.structureType === STRUCTURE_EXTENSION ||\r\n                            structure.structureType === STRUCTURE_SPAWN) &&\r\n                            (structure.energy < structure.energyCapacity)\r\n                    }\r\n                })\r\n                if(target!==null){\r\n                    if(creep.transfer(target, RESOURCE_ENERGY) === ERR_NOT_IN_RANGE) {\r\n                        routerHelper.routeCreep(creep, target, {visualizePathStyle: {stroke: '#ffffff'}})\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if(creep.harvest(creep.memory.source) === ERR_NOT_IN_RANGE) {\r\n                routerHelper.routeCreep(creep, creep.memory.source, {visualizePathStyle: {stroke: '#ffaa00'}})\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = roleSourceProxy"]}