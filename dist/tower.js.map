{"version":3,"sources":["tower.ts"],"names":["output","require","towerHelper","run","tower","room","closestHostile","pos","findClosestByRange","FIND_HOSTILE_CREEPS","attack","damagedContainers","find","FIND_STRUCTURES","filter","structure","structureType","STRUCTURE_CONTAINER","hits","hitsMax","_","size","sortByOrder","repair","damagedRamparts","STRUCTURE_RAMPART","damagedStructures","getTower","towers","STRUCTURE_TOWER","map","module","exports"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,UAAR,CAAb;AACA,IAAIC,cAAc;AACdC,SAAK,aAACC,KAAD,EAAQC,IAAR,EAAY;AACb,YAAIC,iBAAiBF,MAAMG,GAAN,CAAUC,kBAAV,CAA6BC,mBAA7B,CAArB;AACA,YAAGH,cAAH,EAAmB;AACfF,kBAAMM,MAAN,CAAaJ,cAAb;AACH,SAFD,MAEK;AACD,gBAAIK,oBAAoBN,KAAKO,IAAL,CAAUC,eAAV,EAA2B;AAC/CC,wBAAQ,gBAACC,SAAD;AAAA,2BAAeA,UAAUC,aAAV,KAA4BC,mBAA5B,IAAmDF,UAAUG,IAAV,GAAiBH,UAAUI,OAA7F;AAAA;AADuC,aAA3B,CAAxB;AAIA,gBAAGC,EAAEC,IAAF,CAAOV,iBAAP,IAA4B,CAA/B,EAAiC;AAC7BA,oCAAoBS,EAAEE,WAAF,CAAcX,iBAAd,EAAiC,CAAC,MAAD,EAAS,SAAT,CAAjC,EAAsD,CAAC,KAAD,EAAQ,KAAR,CAAtD,CAApB;AACAP,sBAAMmB,MAAN,CAAaZ,kBAAkB,CAAlB,CAAb;AACH,aAHD,MAGK;AACD,oBAAIa,kBAAkBnB,KAAKO,IAAL,CAAUC,eAAV,EAA2B;AAC7CC,4BAAQ,gBAACC,SAAD;AAAA,+BAAeA,UAAUC,aAAV,KAA4BS,iBAA5B,IAAiDV,UAAUG,IAAV,GAAiBH,UAAUI,OAA3F;AAAA;AADqC,iBAA3B,CAAtB;AAGA,oBAAGC,EAAEC,IAAF,CAAOG,eAAP,IAA0B,CAA7B,EAA+B;AAC3BA,sCAAkBJ,EAAEE,WAAF,CAAcE,eAAd,EAA+B,CAAC,MAAD,EAAS,SAAT,CAA/B,EAAoD,CAAC,KAAD,EAAQ,KAAR,CAApD,CAAlB;AACApB,0BAAMmB,MAAN,CAAaC,gBAAgB,CAAhB,CAAb;AACH,iBAHD,MAGK;AACD,wBAAIE,oBAAoBrB,KAAKO,IAAL,CAAUC,eAAV,EAA2B;AAC/CC,gCAAQ,gBAACC,SAAD;AAAA,mCAAeA,UAAUG,IAAV,GAAiBH,UAAUI,OAA1C;AAAA;AADuC,qBAA3B,CAAxB;AAGA,wBAAGC,EAAEC,IAAF,CAAOK,iBAAP,IAA4B,CAA/B,EAAiC;AAC7BA,4CAAoBN,EAAEE,WAAF,CAAcI,iBAAd,EAAiC,CAAC,MAAD,EAAS,SAAT,CAAjC,EAAsD,CAAC,KAAD,EAAQ,KAAR,CAAtD,CAApB;AACAtB,8BAAMmB,MAAN,CAAaG,kBAAkB,CAAlB,CAAb;AACH;AACJ;AACJ;AACJ;AACJ,KA/Ba;AAgCdC,cAAU,kBAACtB,IAAD,EAAK;AACX,YAAIuB,SAASvB,KAAKO,IAAL,CAAUC,eAAV,EAA2B,EAACC,QAAQ,gBAACC,SAAD,EAAU;AAAM,uBAAOA,UAAUC,aAAV,KAA4Ba,eAAnC;AAAmD,aAA5E,EAA3B,CAAb;AACAD,eAAOE,GAAP,CAAW,iBAAK;AAAI5B,wBAAYC,GAAZ,CAAgBC,KAAhB,EAAuBC,IAAvB;AAA6B,SAAjD;AACH;AAnCa,CAAlB;AAsCA0B,OAAOC,OAAP,GAAiB9B,WAAjB","file":"tower.js","sourcesContent":["let output = require('./output')\r\nlet towerHelper = {\r\n    run: (tower, room)=>{\r\n        let closestHostile = tower.pos.findClosestByRange(FIND_HOSTILE_CREEPS)\r\n        if(closestHostile) {\r\n            tower.attack(closestHostile)\r\n        }else{\r\n            let damagedContainers = room.find(FIND_STRUCTURES, {\r\n                filter: (structure) => structure.structureType === STRUCTURE_CONTAINER && structure.hits < structure.hitsMax\r\n            })\r\n\r\n            if(_.size(damagedContainers) > 0){\r\n                damagedContainers = _.sortByOrder(damagedContainers, ['hits', 'hitsMax'], ['asc', 'asc'])\r\n                tower.repair(damagedContainers[0])\r\n            }else{\r\n                let damagedRamparts = room.find(FIND_STRUCTURES, {\r\n                    filter: (structure) => structure.structureType === STRUCTURE_RAMPART && structure.hits < structure.hitsMax\r\n                })\r\n                if(_.size(damagedRamparts) > 0){\r\n                    damagedRamparts = _.sortByOrder(damagedRamparts, ['hits', 'hitsMax'], ['asc', 'asc'])\r\n                    tower.repair(damagedRamparts[0])\r\n                }else{\r\n                    let damagedStructures = room.find(FIND_STRUCTURES, {\r\n                        filter: (structure) => structure.hits < structure.hitsMax\r\n                    })\r\n                    if(_.size(damagedStructures) > 0){\r\n                        damagedStructures = _.sortByOrder(damagedStructures, ['hits', 'hitsMax'], ['asc', 'asc'])\r\n                        tower.repair(damagedStructures[0])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    getTower: (room)=>{\r\n        let towers = room.find(FIND_STRUCTURES, {filter: (structure) => {return structure.structureType === STRUCTURE_TOWER}})\r\n        towers.map(tower =>{towerHelper.run(tower, room)})\r\n    },\r\n}\r\n\r\nmodule.exports = towerHelper"]}